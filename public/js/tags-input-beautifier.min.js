/*!
 * =======================================================
 *  SIMPLEST TAGS INPUT BEAUTIFIER 2.1.4
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var tags = new TIB(document.querySelector('input'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,t,n){function x(e){return t.createElement(e)}function C(e){return Object.keys(e)}function D(e){return C(e).length}var i="__instance__",r=setTimeout,s="innerHTML",a="textContent",o="className",f="classes",u="toLowerCase",l="replace",c="indexOf",p="firstChild",g="parentNode",d="nextSibling",v="previousSibling",h="appendChild",b="insertBefore",m="removeChild",w="setAttribute",j="getAttribute",k="preventDefault",y="addEventListener";!function(e){e.version="2.1.4",e[i]={},e.each=function(t,n){return r(function(){var r,n=e[i];for(r in n)t(n[r],r,n)},0===n?0:n||1),e}}(e[n]=function(t,_){function I(){K.focus()}function M(e){var n,t=e?this:K;r(function(){n=t[a].split(S.join);for(O in n)E.set(n[O])},1)}var K,O,H,E=this,L=Date.now(),N=t.placeholder||"",S={join:", ",max:9999,escape:[",","\n"],alert:!0,text:["Delete “%s”","Duplicate “%s”"],classes:["tags","tag","tags-input","tags-output","tags-view"],update:function(){}},T=x("span"),A=x("span"),B="data-tag";e[n][i][t.id||t.name||D(e[n][i])]=E,_="string"==typeof _?{join:_}:_||{};for(O in S)"undefined"!=typeof _[O]&&(S[O]=_[O]);t[o]=S[f][3],T[o]=S[f][0]+" "+S[f][0]+"-"+L,T[y]("click",I,!1),T.id=S[f][0]+":"+(t.id||L),T[s]='<span class="'+S[f][4]+'"></span>',A[o]=S[f][2],A[s]='<span contenteditable spellcheck="false" style="white-space:nowrap;outline:none;"></span><span>'+N+"</span>",t[g][b](T,t[d]||null),T[p][h](A),K=A[p],E.tags={},E.error=0,E.filter=function(e){return(e+"")[l](new RegExp("["+S.join[l](/\s/g,"")+"]|\\s{2,}|^\\s+|\\s+$","g"),"")[u]()},E.update=function(e,n){for(t.value="";(O=T[p][p])&&O[j](B);)T[p][m](O);if(0===e)e=C(E.tags);else{for(O in e)H=E.filter(e[O]),H&&(E.tags[H]=1);e=C(E.tags)}E.tags={};for(O in e)E.set(e[O],n);return S.update(E),E},E.reset=function(e){return e=E.filter(e||""),e?delete E.tags[e]:E.tags={},E.update(0,1)},E.set=function(e,n){if(e=E.filter(e),""===e||D(E.tags)===S.max)return K[s]="",E;var i=x("span"),r=x("a");if(i[o]=S[f][1],i[w](B,e),r.href="javascript:;",r.title=(S.text[0]||"")[l](/%s/g,e),r[y]("click",function(e){var t=this,n=t[g],i=t[g][j](B);n[g][m](n),E.reset(i),I(),e[k]()},!1),i[h](r),K[s]="",K[d][s]=N,E.tags[e]){if(n)T[p][b](i,A);else if(S.alert){E.error=1;var a=(S.text[1]||e)[l](/%s/g,e);"function"==typeof S.alert?S.alert(a,e,E):alert(a)}}else E.tags[e]=1,T[p][b](i,A);return t.value=C(E.tags).join(S.join),!n&&S.update(E),E},function(){return K[y]("blur",function(){E.error=0,E.set(this[a])},!1),K[y]("paste",M,!1),K[y]("keydown",function(e){E.error=0;var C,t=this,n=e.keyCode,i=T,o=S.escape,f=(e.key||String.fromCharCode(n))[u](),l=e.ctrlKey,p=e.shiftKey,h=A[v]&&A[v][j](B),b=K[d],m="tab"===f||!p&&9===n,w="enter"===f||!p&&13===n,y=" "===f||!p&&32===n,x="backspace"===f||!p&&8===n;if(!l&&w&&-1===o[c]("\n")){for(;i=i[g];)if("form"===i.nodeName[u]()){C=i;break}E.set(t[a]),0===E.error&&C&&C.submit()}else if(l&&("v"===f||!p&&86===n))M();else if(!t[a]&&x)E.reset(h),I();else{var D,_;for(O in o)if(D=o[O],_="s"===D,(_||"	"===D)&&m||(_||"\n"===D)&&w||(_||" "===D)&&y)return r(function(){E.set(t[a]),I()},1),void e[k]();r(function(){var e=t[a];for(b[s]=e?"":N,O=0,H=o.length;H>O;++O)if(o[O]&&-1!==e[c](o[O])){E.set(e.split(o[O]).join(""));break}},1)}},!1),E}(),E.update(t.value.split(S.join),1),E.config=S,E.input=A,E.view=T,E.target=E.output=t})}(window,document,"TIB");